# SOME DESCRIPTIVE TITLE
# Copyright (C) YEAR The FreeBSD Project
# This file is distributed under the same license as the FreeBSD Documentation package.
# Allan Sun <allan914@gmail.com>, 2022.
msgid ""
msgstr ""
"Project-Id-Version: FreeBSD Documentation VERSION\n"
"POT-Creation-Date: 2024-01-17 20:35-0300\n"
"PO-Revision-Date: 2022-01-10 17:25+0000\n"
"Last-Translator: Allan Sun <allan914@gmail.com>\n"
"Language-Team: Chinese (Traditional) <https://translate-dev.freebsd.org/"
"projects/documentation/bookshandbookcutting-edge_index/zh_TW/>\n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: Weblate 4.10.1\n"

#. type: YAML Front Matter: description
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1
#, no-wrap
msgid "Information about how to keep a FreeBSD system up-to-date with freebsd-update or Git, how to rebuild and reinstall the entire base system, etc"
msgstr ""

#. type: YAML Front Matter: part
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1
#, no-wrap
msgid "Part III. System Administration"
msgstr ""

#. type: YAML Front Matter: title
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1
#, fuzzy, no-wrap
#| msgid "Updating and Upgrading FreeBSD"
msgid "Chapter 26. Updating and Upgrading FreeBSD"
msgstr "更新與升級 FreeBSD"

#. type: Title =
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:14
#, no-wrap
msgid "Updating and Upgrading FreeBSD"
msgstr "更新與升級 FreeBSD"

#. type: Title ==
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:52
#, no-wrap
msgid "Synopsis"
msgstr "概述"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:59
#, fuzzy
msgid ""
"FreeBSD is under constant development between releases.  Some people prefer "
"to use the officially released versions, while others prefer to keep in sync "
"with the latest developments.  However, even official releases are often "
"updated with security and other critical fixes.  Regardless of the version "
"used, FreeBSD provides all the necessary tools to keep the system updated, "
"and allows for easy upgrades between versions.  This chapter describes how "
"to track the development system and the basic tools for keeping a FreeBSD "
"system up-to-date."
msgstr ""
"FreeBSD 在每次的發佈之間持續在開發。有些人偏好正式發佈的版本，也有另一群人喜"
"歡使用最新的開發版本。然而，即使是正式發佈的版本也時常會有安全性與其他緊急修"
"復的更新，因此，無論使用哪種版本，FreeBSD 都提供所有必要的工具來讓系統能維持"
"最新的版本，且讓各種版本都能簡單的升級。本章將說明如何追蹤開發版本的系統及讓 "
"FreeBSD 系統維持最新版本的基本工具。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:61
msgid "After reading this chapter, you will know:"
msgstr "讀完這章，您將了解："

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:63
msgid "How to keep a FreeBSD system up-to-date with freebsd-update or Git."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:64
msgid ""
"How to compare the state of an installed system against a known pristine "
"copy."
msgstr "如何比對已安裝系統與已知原始複本間的狀態。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:65
msgid ""
"How to keep the installed documentation up-to-date with Git or documentation "
"ports."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:66
msgid ""
"The difference between the two development branches: FreeBSD-STABLE and "
"FreeBSD-CURRENT."
msgstr "兩種開發分支間的差異：FreeBSD-STABLE 與 FreeBSD-CURRENT。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:67
msgid "How to rebuild and reinstall the entire base system."
msgstr "如何重新編譯及重新安裝整個基礎系統 (Base system)。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:69
msgid "Before reading this chapter, you should:"
msgstr "在開始閱讀這章之前，您需要："

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:71
msgid ""
"Properly set up the network connection (crossref:advanced-"
"networking[advanced-networking,Advanced Networking])."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:72
msgid ""
"Know how to install additional third-party software (crossref:ports[ports,"
"Installing Applications: Packages and Ports])."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:77
msgid ""
"Throughout this chapter, `git` is used to obtain and update FreeBSD "
"sources.  Optionally, the package:devel/git[] port or package may be used."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:80
#, no-wrap
msgid "FreeBSD Update"
msgstr "FreeBSD 更新"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:84
#, fuzzy
msgid ""
"Applying security patches in a timely manner and upgrading to a newer "
"release of an operating system are important aspects of ongoing system "
"administration.  FreeBSD includes a utility called `freebsd-update` which "
"can be used to perform both these tasks."
msgstr ""
"隨時套用安全性更新以及升級到新發佈的作業系統版本對管理一個持續運作的系統是非"
"常重要的任務，FreeBSD 內含可以執行這兩項任務的工具程式，叫做 "
"<command>freebsd-update</command>。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:88
msgid ""
"This utility supports binary security and errata updates to FreeBSD, without "
"the need to manually compile and install the patch or a new kernel.  Binary "
"updates are available for all architectures and releases currently supported "
"by the security team.  The list of supported releases and their estimated "
"end-of-life dates are listed at https://www.FreeBSD.org/security/[https://"
"www.FreeBSD.org/security/]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:92
msgid ""
"This utility also supports operating system upgrades to minor point releases "
"as well as upgrades to another release branch.  Before upgrading to a new "
"release, review its release announcement as it contains important "
"information pertinent to the release.  Release announcements are available "
"from https://www.FreeBSD.org/releases/[https://www.FreeBSD.org/releases/]."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:96
msgid ""
"If a man:crontab[5] utilizing the features of man:freebsd-update[8] exists, "
"it must be disabled before upgrading the operating system."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:99
#, fuzzy
msgid ""
"This section describes the configuration file used by `freebsd-update`, "
"demonstrates how to apply a security patch and how to upgrade to a minor or "
"major operating system release, and discusses some of the considerations "
"when upgrading the operating system."
msgstr ""
"本節將說明 <command>freebsd-update</command> 使用的設定檔， 示範如何套用安全"
"性修補及如何升級到主要或次要的作業系統發行版，並討論升級作業系統的需要考量的"
"事項。"

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:101
#, no-wrap
msgid "The Configuration File"
msgstr "設定檔"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:106
#, fuzzy
msgid ""
"The default configuration file for `freebsd-update` works as-is.  Some users "
"may wish to tweak the default configuration in [.filename]#/etc/freebsd-"
"update.conf#, allowing better control of the process.  The comments in this "
"file explain the available options, but the following may require a bit more "
"explanation:"
msgstr ""
"<command>freebsd-update</command> 預設的設定檔不需變更即可運作。 部份使用者可"
"能會想要調校位於 <filename>/etc/freebsd-update.conf</filename> 的預設設定檔來"
"對程序有更好的控制。該設定檔中的註解均有說明可用的選項，但以下幾個項目可能需"
"要進一步的說明："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:111
#, no-wrap
msgid ""
"# Components of the base system which should be kept updated.\n"
"Components world kernel\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:118
#, fuzzy
msgid ""
"This parameter controls which parts of FreeBSD will be kept up-to-date.  The "
"default is to update the entire base system and the kernel.  Individual "
"components can instead be specified, such as `src/base` or `src/sys`.  "
"However, the best option is to leave this at the default as changing it to "
"include specific items requires every needed item to be listed.  Over time, "
"this could have disastrous consequences as source code and binaries may "
"become out of sync."
msgstr ""
"這個參數控制 FreeBSD 要保持最新版本的部份。 預設是更新整個基礎系統 (Base "
"system) 和核心。 可指定個別元件，例如：<literal>src/base</literal> 或 "
"<literal>src/sys</literal>。 雖然如此，最好的選項是維持預設值，因為更改指定特"
"定項目時需列出每一個需要的項目。時間一久可能會因為原始碼和 Binary 檔案沒有更"
"新而造成慘重的後果。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:124
#, no-wrap
msgid ""
"# Paths which start with anything matching an entry in an IgnorePaths\n"
"# statement will be ignored.\n"
"IgnorePaths /boot/kernel/linker.hints\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:128
#, fuzzy
msgid ""
"To leave specified directories, such as [.filename]#/bin# or [.filename]#/"
"sbin#, untouched during the update process, add their paths to this "
"statement.  This option may be used to prevent `freebsd-update` from "
"overwriting local modifications."
msgstr ""
"要保持特定的目錄在更新過程不被更動，例如 <filename>/bin</filename> 或 "
"<filename>/sbin</filename>，可以將他們的路徑加到此敘述中。 這個選項可以防止 "
"<command>freebsd-update</command> 覆蓋本地的修改。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:135
#, no-wrap
msgid ""
"# Paths which start with anything matching an entry in an UpdateIfUnmodified\n"
"# statement will only be updated if the contents of the file have not been\n"
"# modified by the user (unless changes are merged; see below).\n"
"UpdateIfUnmodified /etc/ /var/ /root/ /.cshrc /.profile\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:140
msgid ""
"This option will only update unmodified configuration files in the specified "
"directories.  Any changes made by the user will prevent the automatic "
"updating of these files.  There is another option, `KeepModifiedMetadata`, "
"which will instruct `freebsd-update` to save the changes during the merge."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:146
#, no-wrap
msgid ""
"# When upgrading to a new FreeBSD release, files which match MergeChanges\n"
"# will have any local changes merged into the version from the new release.\n"
"MergeChanges /etc/ /var/named/etc/ /boot/device.hints\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:153
msgid ""
"List of directories with configuration files that `freebsd-update` should "
"attempt to merge.  The file merge process is a series of man:diff[1] patches "
"similar to man:mergemaster[8], but with fewer options.  Merges are either "
"accepted, open an editor, or cause `freebsd-update` to abort.  When in "
"doubt, backup [.filename]#/etc# and just accept the merges.  See man:"
"mergemaster[8] for more information about `mergemaster`."
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:159
#, no-wrap
msgid ""
"# Directory in which to store downloaded updates and temporary\n"
"# files used by FreeBSD Update.\n"
"# WorkDir /var/db/freebsd-update\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:163
#, fuzzy
msgid ""
"This directory is where all patches and temporary files are placed.  In "
"cases where the user is doing a version upgrade, this location should have "
"at least a gigabyte of disk space available."
msgstr ""
"這個目錄是所有修補檔和暫存檔的存放處。當使用者進行版本升級時，這個位置應該要"
"有至少 1GB 的可用磁碟空間。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:171
#, no-wrap
msgid ""
"# When upgrading between releases, should the list of Components be\n"
"# read strictly (StrictComponents yes) or merely as a list of components\n"
"# which *might* be installed of which FreeBSD Update should figure out\n"
"# which actually are installed and upgrade those (StrictComponents no)?\n"
"# StrictComponents no\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:175
msgid ""
"When this option is set to `yes`, `freebsd-update` will assume that the "
"`Components` list is complete and will not attempt to make changes outside "
"of the list.  Effectively, `freebsd-update` will attempt to update every "
"file which belongs to the `Components` list."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:177
msgid "Refer to man:freebsd-update.conf[5] for more details."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:179
#, no-wrap
msgid "Applying Security Patches"
msgstr "套用安全性修補"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:183
msgid ""
"The process of applying FreeBSD security patches has been simplified, "
"allowing an administrator to keep a system fully patched using `freebsd-"
"update`.  More information about FreeBSD security advisories can be found in "
"crossref:security[security-advisories,\"FreeBSD Security Advisories\"]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:187
#, fuzzy
msgid ""
"FreeBSD security patches may be downloaded and installed using the following "
"commands.  The first command will determine if any outstanding patches are "
"available, and if so, will list the files that will be modified if the "
"patches are applied.  The second command will apply the patches."
msgstr ""
"FreeBSD 安全性修補可以使用以下指令下載並安裝。 第一個指令會偵測是否有可用的修"
"補，如果有，將列出若執行修補後會變更的檔案清單。第二個指令將會套用修補。"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:192
#, no-wrap
msgid ""
"# freebsd-update fetch\n"
"# freebsd-update install\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:196
#, fuzzy
msgid ""
"If the update applies any kernel patches, the system will need a reboot in "
"order to boot into the patched kernel.  If the patch was applied to any "
"running binaries, the affected applications should be restarted so that the "
"patched version of the binary is used."
msgstr ""
"如果更新套用了任何核心修補，系統將會需要重新開機以使用修補過的核心。如果修補"
"套用在任何執行中的 Binary，受影響的應用程式應重新啟動來使用修補過的 Binary 版"
"本。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:202
msgid ""
"Usually, the user needs to be prepared to reboot the system.  To know if the "
"system requires a reboot due to a kernel update, execute the commands "
"`freebsd-version -k` and `uname -r`.  Reboot the system if the outputs "
"differ."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:205
#, fuzzy
msgid ""
"The system can be configured to automatically check for updates once every "
"day by adding this entry to [.filename]#/etc/crontab#:"
msgstr ""
"加入以下項目至 <filename>/etc/crontab</filename> 可設定系統每天自動檢查更新一"
"次："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:209
#, no-wrap
msgid "@daily                                  root    freebsd-update cron\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:213
msgid ""
"If patches exist, they will automatically be downloaded but will not be "
"applied.  The `root` user will be sent an email so that the patches may be "
"reviewed and manually installed with `freebsd-update install`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:215
#, fuzzy
msgid ""
"If anything goes wrong, `freebsd-update` has the ability to roll back the "
"last set of changes with the following command:"
msgstr ""
"如果有發生任何錯誤，<command>freebsd-update</command> 可以使用以下指令還原最"
"後所做的變更："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:220
#, no-wrap
msgid ""
"# freebsd-update rollback\n"
"Uninstalling updates... done.\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:223
msgid ""
"Again, the system should be restarted if the kernel or any kernel modules "
"were modified and any affected binaries should be restarted."
msgstr ""
"再次強調，若核心或任何核心模組有做過修改應重新啟動系統，以及任何受影響的 "
"Binary 應重新執行。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:228
msgid ""
"Only the [.filename]#GENERIC# kernel can be automatically updated by "
"`freebsd-update`.  If a custom kernel is installed, it will have to be "
"rebuilt and reinstalled after `freebsd-update` finishes installing the "
"updates.  The default kernel name is _GENERIC_.  The man:uname[1] command "
"may be used to verify its installation."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:234
msgid ""
"Always keep a copy of the [.filename]#GENERIC# kernel in [.filename]#/boot/"
"GENERIC#.  It will be helpful in diagnosing a variety of problems and in "
"performing version upgrades.  Refer to <<freebsd-update-custom-kernel-9x>> "
"for instructions on how to get a copy of the [.filename]#GENERIC# kernel."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:239
#, fuzzy
msgid ""
"Unless the default configuration in [.filename]#/etc/freebsd-update.conf# "
"has been changed, `freebsd-update` will install the updated kernel sources "
"along with the rest of the updates.  Rebuilding and reinstalling a new "
"custom kernel can then be performed in the usual way."
msgstr ""
"除非在 <filename>/etc/freebsd-update.conf</filename> 的預設設定檔被修改，否"
"則 <command>freebsd-update</command> 將會安裝更新後的核心原始碼和其餘的更新，"
"可依平常的方式執行重新編譯與重新安裝核心。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:246
#, fuzzy
msgid ""
"The updates distributed by `freebsd-update` do not always involve the "
"kernel.  It is not necessary to rebuild a custom kernel if the kernel "
"sources have not been modified by `freebsd-update install`.  However, "
"`freebsd-update` will always update [.filename]#/usr/src/sys/conf/newvers."
"sh#.  The current patch level, as indicated by the `-p` number reported by "
"`uname -r`, is obtained from this file.  Rebuilding a custom kernel, even if "
"nothing else changed, allows `uname` to accurately report the current patch "
"level of the system.  This is particularly helpful when maintaining multiple "
"systems, as it allows for a quick assessment of the updates installed in "
"each one."
msgstr ""
"以 <command>freebsd-update</command> 發行的更新並非總是會更新核心。若核心的原"
"始碼沒有被 <command>freebsd-update install</command> 修改則不需要重新編譯自訂"
"的核心。雖然如此 <command>freebsd-update</command> 總是會更新 <filename>/usr/"
"src/sys/conf/newvers.sh</filename>，目前修補的版本如 <command>uname -r</"
"command> 執行結果中的 <literal>-p</literal> 數字，便是由該檔取得。即使沒有做"
"任何其他變更，重新編譯自訂核心可讓 <command>uname</command> 準確的回報系統目"
"前的修補版本。當維護多個系統時這會特別有用，因其可讓你快速評估每個系統安裝的"
"更新。"

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:248
#, fuzzy, no-wrap
#| msgid "Performing Major and Minor Version Upgrades"
msgid "Performing Minor and Major Version Upgrades"
msgstr "執行主要及次要版號升級"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:251
msgid ""
"Upgrades from one minor version of FreeBSD to another are called _minor "
"version_ upgrades. An example:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:253
msgid "FreeBSD 13.1 to 13.2."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:255
msgid "_Major version_ upgrades increase the major version number. An example:"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:257
msgid "FreeBSD 13.2 to 14.0."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:259
msgid ""
"Both types of upgrade can be performed by providing `freebsd-update` with a "
"release version target."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:265
msgid ""
"After each new `RELEASE`, FreeBSD package build servers will, for a limited "
"period, *not* use the newer version of the operating system.  This provides "
"continuity for the many users who do not upgrade immediately after a release "
"announcement.  For example:"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:267
msgid ""
"packages for users of 13.1 and 13.2 will be built on a server running 13.1, "
"until 13.1 reaches end of life"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:269
msgid "and, critically:"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:271
msgid "a kernel module that is built on 13.1 might *not* be suitable for 13.2."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:273
msgid ""
"So, with any minor or major OS upgrade, if your package requirements include "
"any kernel module:"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:275
#, no-wrap
msgid "*be prepared to build the module from source*.\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:282
msgid ""
"If the system is running a custom kernel, make sure that a copy of the [."
"filename]#GENERIC# kernel exists in [.filename]#/boot/GENERIC# before "
"starting the upgrade.  Refer to <<freebsd-update-custom-kernel-9x>> for "
"instructions on how to get a copy of the [.filename]#GENERIC# kernel."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:285
msgid ""
"The following command, when run on a FreeBSD 13.1 system, will upgrade it to "
"FreeBSD 13.2:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:289
#, no-wrap
msgid "# freebsd-update -r 13.2-RELEASE upgrade\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:294
#, fuzzy
msgid ""
"After the command has been received, `freebsd-update` will evaluate the "
"configuration file and current system in an attempt to gather the "
"information necessary to perform the upgrade.  A screen listing will display "
"which components have and have not been detected.  For example:"
msgstr ""
"收到這個指令後，<command>freebsd-update</command> 會開始評估設定檔和目前的系"
"統來收集升級所需的資訊。 螢幕會顯示偵測到或沒偵測到的元件清單。例如："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:301
#, no-wrap
msgid ""
"Looking up update.FreeBSD.org mirrors... 1 mirrors found.\n"
"Fetching metadata signature for 13.1-RELEASE from update1.FreeBSD.org... done.\n"
"Fetching metadata index... done.\n"
"Inspecting system... done.\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:307
#, no-wrap
msgid ""
"The following components of FreeBSD seem to be installed:\n"
"kernel/smp src/base src/bin src/contrib src/crypto src/etc src/games\n"
"src/gnu src/include src/krb5 src/lib src/libexec src/release src/rescue\n"
"src/sbin src/secure src/share src/sys src/tools src/ubin src/usbin\n"
"world/base world/info world/lib32 world/manpages\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:311
#, no-wrap
msgid ""
"The following components of FreeBSD do not seem to be installed:\n"
"kernel/generic world/catpages world/dict world/doc world/games\n"
"world/proflibs\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:313
#, no-wrap
msgid "Does this look reasonable (y/n)? y\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:317
#, fuzzy
msgid ""
"At this point, `freebsd-update` will attempt to download all files required "
"for the upgrade.  In some cases, the user may be prompted with questions "
"regarding what to install or how to proceed."
msgstr ""
"此時，<command>freebsd-update</command> 將會嘗試下載所有升級需要的檔案。 在某"
"些情況，會詢問使用者一些關於要安裝什麼或要如何繼續。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:319
msgid ""
"When using a custom kernel, the above step will produce a warning similar to "
"the following:"
msgstr "當使用自訂核心，上述的步驟將會產生如下的警告："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:326
#, no-wrap
msgid ""
"WARNING: This system is running a \"MYKERNEL\" kernel, which is not a\n"
"kernel configuration distributed as part of FreeBSD 13.1-RELEASE.\n"
"This kernel will not be updated: you MUST update the kernel manually\n"
"before running \"/usr/sbin/freebsd-update install\"\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:330
#, fuzzy
msgid ""
"This warning may be safely ignored at this point.  The updated [."
"filename]#GENERIC# kernel will be used as an intermediate step in the "
"upgrade process."
msgstr ""
"這時的警告可以安全地忽略，升級過程將會使用更新過的 <filename>GENERIC</"
"filename> 核心來進行。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:339
#, fuzzy
msgid ""
"Once all the patches have been downloaded to the local system, they will be "
"applied.  This process may take a while, depending on the speed and workload "
"of the machine.  Configuration files will then be merged.  The merging "
"process requires some user intervention as a file may be merged or an editor "
"may appear on screen for a manual merge.  The results of every successful "
"merge will be shown to the user as the process continues.  A failed or "
"ignored merge will cause the process to abort.  Users may wish to make a "
"backup of [.filename]#/etc# and manually merge important files, such as [."
"filename]#master.passwd# or [.filename]#group# at a later time."
msgstr ""
"所有的修補都下載到本地系統之後， 將會開始套用更新。這個過程可能會花點時間，取"
"決於機器的速度和工作量。設定檔將會被合併。 合併的過程中當檔案被合併或是手動合"
"併畫面上出現編輯器時需要使用者操作。 每一個成功合併的結果將會顯示給使用者並繼"
"續程序，失敗或忽略合併將會使程序中斷。使用者可能想要備份 <filename>/etc</"
"filename> 並稍後手動合併重要的檔案，例如：<filename>master.passwd</filename> "
"或 <filename>group</filename>。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:346
#, fuzzy
msgid ""
"The system is not being altered yet as all patching and merging is happening "
"in another directory.  Once all patches have been applied successfully, all "
"configuration files have been merged and it seems the process will go "
"smoothly, the changes can be committed to disk by the user using the "
"following command:"
msgstr ""
"所有的修補與合併動作會在另一個目錄進行，並不會直接修改。當成功套用所有修補，"
"所有設定檔已合併且過程順利，使用者可使用以下指令將變更安裝到磁碟："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:350
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:386
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:462
#, no-wrap
msgid "# freebsd-update install\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:357
msgid ""
"The kernel and kernel modules will be patched first.  If the system is "
"running with a custom kernel, use man:nextboot[8] to set the kernel for the "
"next boot to the updated [.filename]#/boot/GENERIC#:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:361
#, no-wrap
msgid "# nextboot -k GENERIC\n"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:370
#, fuzzy
msgid ""
"Before rebooting with the [.filename]#GENERIC# kernel, make sure it contains "
"all the drivers required for the system to boot properly and connect to the "
"network, if the machine being updated is accessed remotely.  In particular, "
"if the running custom kernel contains built-in functionality usually "
"provided by kernel modules, make sure to temporarily load these modules into "
"the [.filename]#GENERIC# kernel using the [.filename]#/boot/loader.conf# "
"facility.  It is recommended to disable non-essential services as well as "
"any disk and network mounts until the upgrade process is complete."
msgstr ""
"若機器在遠端進行更新，請在使用 <filename>GENERIC</filename> 核心重新開機前，"
"請確定該核心含有所有系統所需的驅動程式以正常開機並連線至網路。特別是在執行的"
"自訂核心有使用到由核心模組提供內建功能，請確定將這些模組已暫時使用 "
"<filename>/boot/loader.conf</filename> 設定檔載入到 <filename>GENERIC</"
"filename> 核心。建議關閉非必須的服務和磁碟與網路掛載直到升級程序完成。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:373
msgid "The machine should now be restarted with the updated kernel:"
msgstr "機器現在應使用更新過的核心重新開機："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:377
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1097
#, no-wrap
msgid "# shutdown -r now\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:382
#, fuzzy
msgid ""
"Once the system has come back online, restart `freebsd-update` using the "
"following command.  Since the state of the process has been saved, `freebsd-"
"update` will not start from the beginning, but will instead move on to the "
"next phase and remove all old shared libraries and object files."
msgstr ""
"一旦系統重新上線，使用以下指令繼續 <command>freebsd-update</command>。 由於程"
"序的狀態已被儲存，<command>freebsd-update</command> 不會重頭開始，但會進行下"
"一個階段並移除所有舊的共用程式庫和目標檔。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:391
msgid ""
"Depending upon whether any library version numbers were bumped, there may "
"only be two install phases instead of three."
msgstr "取決於是否有任何程式庫版本編號衝突，也可能只有兩個而不是三個安裝階段。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:395
msgid ""
"The upgrade is now complete.  If this was a major version upgrade, reinstall "
"all ports and packages as described in <<freebsdupdate-portsrebuild>>."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:397
#, no-wrap
msgid "Custom Kernels with FreeBSD 9.X and Later"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:402
msgid ""
"Before using `freebsd-update`, ensure that a copy of the [."
"filename]#GENERIC# kernel exists in [.filename]#/boot/GENERIC#.  If a custom "
"kernel has only been built once, the kernel in [.filename]#/boot/kernel.old# "
"is the `GENERIC` kernel.  Simply rename this directory to [.filename]#/boot/"
"GENERIC#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:406
#, fuzzy
msgid ""
"If a custom kernel has been built more than once or if it is unknown how "
"many times the custom kernel has been built, obtain a copy of the `GENERIC` "
"kernel that matches the current version of the operating system.  If "
"physical access to the system is available, a copy of the `GENERIC` kernel "
"can be installed from the installation media:"
msgstr ""
"若有編譯自訂核心過超過一次，或已經不曉得編譯自訂核心的次數，則需取得與目前作"
"業系統版本相符的 <literal>GENERIC</literal> 核心複本。若可直接操作實體系統，"
"則可以從安裝媒體取得 <literal>GENERIC</literal> 核心複本："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:412
#, no-wrap
msgid ""
"# mount /cdrom\n"
"# cd /cdrom/usr/freebsd-dist\n"
"# tar -C/ -xvf kernel.txz boot/kernel/kernel\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:415
msgid ""
"Alternately, the `GENERIC` kernel may be rebuilt and installed from source:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:420
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make kernel __MAKE_CONF=/dev/null SRCCONF=/dev/null\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:425
msgid ""
"For this kernel to be identified as the `GENERIC` kernel by `freebsd-"
"update`, the [.filename]#GENERIC# configuration file must not have been "
"modified in any way.  It is also suggested that the kernel is built without "
"any other special options."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:427
msgid ""
"Rebooting into the [.filename]#GENERIC# kernel is not required as `freebsd-"
"update` only needs [.filename]#/boot/GENERIC# to exist."
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:429
#, no-wrap
msgid "Upgrading Packages After a Major Version Upgrade"
msgstr "主要版號升級後的套件升級"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:436
msgid ""
"Generally, installed applications will continue to work without problems "
"after minor version upgrades.  Major versions use different Application "
"Binary Interfaces (ABIs), which will break most third-party applications.  "
"After a major version upgrade, all installed packages and ports need to be "
"upgraded.  Packages can be upgraded using `pkg upgrade`.  To upgrade "
"installed ports, use a utility such as package:ports-mgmt/portmaster[]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:440
#, fuzzy
msgid ""
"A forced upgrade of all installed packages will replace the packages with "
"fresh versions from the repository even if the version number has not "
"increased.  This is required because of the ABI version change when "
"upgrading between major versions of FreeBSD.  The forced upgrade can be "
"accomplished by performing:"
msgstr ""
"強制升級所有已安裝的套件會使用檔案庫中新版本的套件來取得目前套件，即使該版號"
"沒有增加。由於在升級 FreeBSD 主要版本時會變更 ABI 版本，因此這是必要動作。強"
"制升級可以執行以下指令來完成："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:444
#, no-wrap
msgid "# pkg-static upgrade -f\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:447
msgid ""
"A rebuild of all installed applications can be accomplished with this "
"command:"
msgstr "重新編譯所有已安裝的應用程式可以執行以下指令來完成："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:451
#, no-wrap
msgid "# portmaster -af\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:455
#, fuzzy
msgid ""
"This command will display the configuration screens for each application "
"that has configurable options and wait for the user to interact with those "
"screens.  To prevent this behavior, and use only the default options, "
"include `-G` in the above command."
msgstr ""
"這個指令會在安裝每個應用程式有可設定選項時顯示設定畫面，並會等待使用者操作該"
"畫面，要避免這種情況並使用預設的設定選項，可在上述指令加上 <option>-G</"
"option> 參數。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:458
#, fuzzy
msgid ""
"Once the software upgrades are complete, finish the upgrade process with a "
"final call to `freebsd-update` in order to tie up all the loose ends in the "
"upgrade process:"
msgstr ""
"完成軟體升級後，最後需執行 <command>freebsd-update</command> 來完成最後的升級"
"動作："

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:466
msgid ""
"If the [.filename]#GENERIC# kernel was temporarily used, this is the time to "
"build and install a new custom kernel using the instructions in crossref:"
"kernelconfig[kernelconfig,Configuring the FreeBSD Kernel]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:469
#, fuzzy
msgid ""
"Reboot the machine into the new FreeBSD version.  The upgrade process is now "
"complete."
msgstr "重新開機使用新的 FreeBSD 版本後，升級程序便正式完成。"

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:471
#, no-wrap
msgid "System State Comparison"
msgstr "比對系統狀態"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:475
#, fuzzy
msgid ""
"The state of the installed FreeBSD version against a known good copy can be "
"tested using `freebsd-update IDS`.  This command evaluates the current "
"version of system utilities, libraries, and configuration files and can be "
"used as a built-in Intrusion Detection System (IDS)."
msgstr ""
"已安裝的 FreeBSD 版本狀態可以使用 <command>freebsd-update IDS</command> 與另"
"一個已知良好的複本來做比對測試。 這個指令會評估目前版本的系統工具，程式庫和設"
"定檔，可做為內建的入侵偵測系統來使用 (Intrusion Detection System, "
"<acronym>IDS</acronym>)。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:483
msgid ""
"This command is not a replacement for a real IDS such as package:security/"
"snort[].  As `freebsd-update` stores data on disk, the possibility of "
"tampering is evident.  While this possibility may be reduced using `kern."
"securelevel` and by storing the `freebsd-update` data on a read-only file "
"system when not in use, a better solution would be to compare the system "
"against a secure disk, such as a DVD or securely stored external USB disk "
"device.  An alternative method for providing IDS functionality using a built-"
"in utility is described in crossref:security[security-ids,\"Binary "
"Verification\"]"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:486
msgid ""
"To begin the comparison, specify the output file to save the results to:"
msgstr "要開始比對，需指定輸出的檔案來儲存結果："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:490
#, no-wrap
msgid "# freebsd-update IDS >> outfile.ids\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:493
#, fuzzy
msgid ""
"The system will now be inspected and a lengthy listing of files, along with "
"the SHA256 hash values for both the known value in the release and the "
"current installation, will be sent to the specified output file."
msgstr ""
"系統將會開始檢查並且會產生相當長的檔案清單，內容包含發佈版本已知的與目前安裝"
"版本的 <acronym>SHA256</acronym> 雜湊值會儲存到指定的輸出檔。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:496
#, fuzzy
msgid ""
"The entries in the listing are extremely long, but the output format may be "
"easily parsed.  For instance, to obtain a list of all files which differ "
"from those in the release, issue the following command:"
msgstr ""
"清單中的項目會相當的多，但輸出的格式可以很簡單的用來分析。例如，要取得與發佈"
"版本不同的檔案清單，可使用以下指令："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:504
#, no-wrap
msgid ""
"# cat outfile.ids | awk '{ print $1 }' | more\n"
"/etc/master.passwd\n"
"/etc/motd\n"
"/etc/passwd\n"
"/etc/pf.conf\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:511
#, fuzzy
msgid ""
"This sample output has been truncated as many more files exist.  Some files "
"have natural modifications.  For example, [.filename]#/etc/passwd# will be "
"modified if users have been added to the system.  Kernel modules may differ "
"as `freebsd-update` may have updated them.  To exclude specific files or "
"directories, add them to the `IDSIgnorePaths` option in [.filename]#/etc/"
"freebsd-update.conf#."
msgstr ""
"實際的檔案會更多，此範例的輸出已精簡。部份檔案可能本來就會被修改。例如 "
"<filename>/etc/passwd</filename> 在新增使用者到系統時會被修改，核心模組也有可"
"能因使用 <command>freebsd-update</command> 更新而有所不同。要排除特定的檔案或"
"目錄可將這些檔案或目錄加入到 <filename>/etc/freebsd-update.conf</filename> 中"
"的 <literal>IDSIgnorePaths</literal> 選項。"

#. type: Title ==
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:513
#, fuzzy, no-wrap
#| msgid "Updating the Source"
msgid "Updating Bootcode"
msgstr "更新原始碼"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:516
msgid ""
"The following manuals describe the upgrade process of bootcode and boot "
"loaders: man:gpart[8], man:gptboot[8], man:gptzfsboot[8], and man:loader."
"efi[8]."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:518
#, no-wrap
msgid "Updating the Documentation Set"
msgstr "更新文件集"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:522
msgid ""
"Documentation is an integral part of the FreeBSD operating system.  While an "
"up-to-date version of the FreeBSD documentation is always available on the "
"FreeBSD web site (link:https://docs.FreeBSD.org[Documentation Portal]), it "
"can be handy to have an up-to-date, local copy of the FreeBSD website, "
"handbooks, FAQ, and articles."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:524
msgid ""
"This section describes how to use either source or the FreeBSD Ports "
"Collection to keep a local copy of the FreeBSD documentation up-to-date."
msgstr ""
"本節將說明如何使用原始碼與 FreeBSD Port 套件集來取得最新版本 FreeBSD 文件本地"
"複本。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:527
msgid ""
"For information on editing and submitting corrections to the documentation, "
"refer to the FreeBSD Documentation Project Primer for New Contributors "
"(extref:{fdp-primer}[FreeBSD Documentation Project Primer for New "
"Contributors])."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:529
#, no-wrap
msgid "Updating Documentation from Source"
msgstr "自原始碼更新說明文件"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:533
msgid ""
"Rebuilding the FreeBSD documentation from source requires a collection of "
"tools which are not part of the FreeBSD base system.  The required tools can "
"be installed following extref:{fdp-primer}[these steps, overview-quick-"
"start] from the FreeBSD Documentation Project Primer."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:535
msgid ""
"Once installed, use `git` to fetch a clean copy of the documentation source:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:539
#, no-wrap
msgid "# git clone https://git.FreeBSD.org/doc.git /usr/doc\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:543
#, fuzzy
msgid ""
"The initial download of the documentation sources may take a while.  Let it "
"run until it completes."
msgstr "第一次下載文件原始碼需要一些時間，請耐心等候執行完畢。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:545
msgid "Future updates of the documentation sources may be fetched by running:"
msgstr "往後更新文件原始碼可執行："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:549
#, no-wrap
msgid "# git pull\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:553
#, fuzzy
msgid ""
"Once an up-to-date snapshot of the documentation sources has been fetched to "
"[.filename]#/usr/doc#, everything is ready for an update of the installed "
"documentation."
msgstr ""
"下載最新的文件原始碼到 <filename>/usr/doc</filename> 之後，便完成要更新已安裝"
"文件的準備動作。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:555
msgid "A full update may be performed by typing:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:560
#, no-wrap
msgid ""
"# cd /usr/doc\n"
"# make\n"
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:563
#, no-wrap
msgid "Tracking a Development Branch"
msgstr "追蹤開發分支"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:566
msgid ""
"FreeBSD has two development branches: FreeBSD-CURRENT and FreeBSD-STABLE."
msgstr "FreeBSD 有兩個開發分支：FreeBSD-CURRENT 及 FreeBSD-STABLE。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:568
msgid ""
"This section provides an explanation of each branch and its intended "
"audience, as well as how to keep a system up-to-date with each respective "
"branch."
msgstr ""
"本節將說明每個分支及其的特定使用者，也會說明如何在各別分支維持系統為最新版。"

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:570
#, no-wrap
msgid "Using FreeBSD-CURRENT"
msgstr "使用 FreeBSD-CURRENT"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:574
#, fuzzy
msgid ""
"FreeBSD-CURRENT is the \"bleeding edge\" of FreeBSD development and FreeBSD-"
"CURRENT users are expected to have a high degree of technical skill.  Less "
"technical users who wish to track a development branch should track FreeBSD-"
"STABLE instead."
msgstr ""
"FreeBSD-CURRENT 是 FreeBSD 開發的 <quote>最前線</quote>，FreeBSD-CURRENT 的使"
"用者需具備較強的技術能力。技術能力較弱的使用者應改追蹤 FreeBSD-STABLE 開發分"
"支。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:578
#, fuzzy
msgid ""
"FreeBSD-CURRENT is the very latest source code for FreeBSD and includes "
"works in progress, experimental changes, and transitional mechanisms that "
"might or might not be present in the next official release.  While many "
"FreeBSD developers compile the FreeBSD-CURRENT source code daily, there are "
"short periods of time when the source may not be buildable.  These problems "
"are resolved as quickly as possible, but whether or not FreeBSD-CURRENT "
"brings disaster or new functionality can be a matter of when the source code "
"was synced."
msgstr ""
"FreeBSD-CURRENT 是 FreeBSD 最新的原始碼，其中包括正在進行的開發工作、實驗性的"
"變更以及不一定會在下一個官方發行版出現的過渡機制。 雖然 FreeBSD 開發者每天編"
"譯 FreeBSD-CURRENT 原始碼，但仍可能有短暫時間原始碼是無法編譯的。雖然這些問題"
"會儘快被解決，但是無論 FreeBSD-CURRENT 帶來災難或是新功能，同步原始碼時都要考"
"量這個問題。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:580
msgid "FreeBSD-CURRENT is made available for three primary interest groups:"
msgstr "FreeBSD-CURRENT 主要給下以三種族群："

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:582
msgid ""
"Members of the FreeBSD community who are actively working on some part of "
"the source tree."
msgstr "致力於開發某一部份原始碼樹的 FreeBSD 社群成員。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:583
msgid ""
"Members of the FreeBSD community who are active testers. They are willing to "
"spend time solving problems, making topical suggestions on changes and the "
"general direction of FreeBSD, and submitting patches."
msgstr ""
"FreeBSD 社群成員中活耀的測試人員。 他們願意花時間解決問題，對 FreeBSD 的變更"
"及大方向提出專業建議並送交修補。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:584
msgid ""
"Users who wish to keep an eye on things, use the current source for "
"reference purposes, or make the occasional comment or code contribution."
msgstr ""
"隨時關注的使用者，使用目前原始碼做為參考用途，或是偶爾提供意見或貢獻原始碼。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:588
msgid ""
"FreeBSD-CURRENT should _not_ be considered a fast-track to getting new "
"features before the next release as pre-release features are not yet fully "
"tested and most likely contain bugs.  It is not a quick way of getting bug "
"fixes as any given commit is just as likely to introduce new bugs as to fix "
"existing ones.  FreeBSD-CURRENT is not in any way \"officially supported\"."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:590
msgid "To track FreeBSD-CURRENT:"
msgstr "若要追蹤 FreeBSD-CURRENT："

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:592
msgid ""
"Join the {freebsd-current} and the {dev-commits-src-main} lists. This is "
"_essential_ in order to see the comments that people are making about the "
"current state of the system and to receive important bulletins about the "
"current state of FreeBSD-CURRENT."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:594
msgid ""
"The {dev-commits-src-main} list records the commit log entry for each change "
"as it is made, along with any pertinent information on possible side effects."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:597
msgid ""
"To join these lists, go to {mailing-lists}, click on the list to subscribe "
"to, and follow the instructions.  In order to track changes to the whole "
"source tree, not just the changes to FreeBSD-CURRENT, subscribe to the {dev-"
"commits-src-all}."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:598
msgid ""
"Synchronize with the FreeBSD-CURRENT sources. Typically, `git` is used to "
"check out the -CURRENT code from the `main` branch of the FreeBSD Git "
"repository (see crossref:mirrors[git,“Using Git”] for details)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:599
#, fuzzy
msgid ""
"Due to the size of the repository, some users choose to only synchronize the "
"sections of source that interest them or which they are contributing patches "
"to. However, users that plan to compile the operating system from source "
"must download _all_ of FreeBSD-CURRENT, not just selected portions."
msgstr ""
"考量到檔案庫的大小，部份使用者選擇只同步他們有興趣或貢獻修補的部份原始碼。然"
"而， 計劃要從原始碼編譯整個作業系統的使用者須下載 <emphasis>全部</emphasis> "
"的 FreeBSD-CURRENT，不可只有選擇的部份。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:602
msgid ""
"Before compiling FreeBSD-CURRENT, read [.filename]#/usr/src/Makefile# very "
"carefully and follow the instructions in <<makeworld>>.  Read the {freebsd-"
"current} and [.filename]#/usr/src/UPDATING# to stay up-to-date on other "
"bootstrapping procedures that sometimes become necessary on the road to the "
"next release."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:603
msgid ""
"Be active! FreeBSD-CURRENT users are encouraged to submit their suggestions "
"for enhancements or bug fixes. Suggestions with accompanying code are always "
"welcome."
msgstr ""
"要活躍！我們非常鼓勵 FreeBSD-CURRENT 的使用者發表他們對加強哪些功能或是修復哪"
"些錯誤的建議。 如果您在建議時能附上相關程式碼的話，是最好的。"

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:605
#, no-wrap
msgid "Using FreeBSD-STABLE"
msgstr "使用 FreeBSD-STABLE"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:612
#, fuzzy
msgid ""
"FreeBSD-STABLE is the development branch from which major releases are "
"made.  Changes go into this branch at a slower pace and with the general "
"assumption that they have first been tested in FreeBSD-CURRENT.  This is "
"_still_ a development branch and, at any given time, the sources for FreeBSD-"
"STABLE may or may not be suitable for general use.  It is simply another "
"engineering development track, not a resource for end-users.  Users who do "
"not have the resources to perform testing should instead run the most recent "
"release of FreeBSD."
msgstr ""
"FreeBSD-STABLE 是一個開發分支，會在主要的版本更新後產生，進入這個分支的步伐會"
"比較緩慢，而且通常會假定已經在 FreeBSD-CURRENT 中做過測試，所以問題會比較少，"
"但這<emphasis>仍然</emphasis>是一個開發分支，在任何時間點，FreeBSD-STABLE 中"
"的原始碼不能保証能供一般使用，它只是另一個開發支線，並不是供最終使用者使用的"
"資源，若沒有任何資源可以做測試的使用者應改使用最新版本的 FreeBSD 發佈版。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:614
msgid ""
"Those interested in tracking or contributing to the FreeBSD development "
"process, especially as it relates to the next release of FreeBSD, should "
"consider following FreeBSD-STABLE."
msgstr ""
"對於那些有興趣追蹤或為 FreeBSD 開發流程提供一些貢獻的人，特別是針對下一個主要"
"發佈版的 FreeBSD，應該考慮追蹤 FreeBSD-STABLE。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:619
#, fuzzy
msgid ""
"While the FreeBSD-STABLE branch should compile and run at all times, this "
"cannot be guaranteed.  Since more people run FreeBSD-STABLE than FreeBSD-"
"CURRENT, it is inevitable that bugs and corner cases will sometimes be found "
"in FreeBSD-STABLE that were not apparent in FreeBSD-CURRENT.  For this "
"reason, one should not blindly track FreeBSD-STABLE.  It is particularly "
"important _not_ to update any production servers to FreeBSD-STABLE without "
"thoroughly testing the code in a development or testing environment."
msgstr ""
"雖然 FreeBSD-STABLE 分支應該已經做過編譯並執行過，但這仍然無法保証不會出任何"
"問題。由於使用 FreeBSD-STABLE 的人比 FreeBSD-CURRENT 更多，因此不可避免的，有"
"時仍會在 FreeBSD-STABLE 中發現未在 FreeBSD-CURRENT 中出現的問題與特殊狀況。基"
"於這個原因，任何人都不應盲目的追蹤 FreeBSD-STABLE，特別重要的是 <emphasis>不"
"</emphasis> 要將任何產線上的伺服器更新成未經開發或測試環境中測試過的 FreeBSD-"
"STABLE。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:621
msgid "To track FreeBSD-STABLE:"
msgstr "若要追蹤 FreeBSD-STABLE："

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:623
msgid ""
"Join the {freebsd-stable} in order to stay informed of build dependencies "
"that may appear in FreeBSD-STABLE or any other issues requiring special "
"attention. Developers will also make announcements in this mailing list when "
"they are contemplating some controversial fix or update, giving the users a "
"chance to respond if they have any issues to raise concerning the proposed "
"change."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:627
msgid ""
"Join the relevant git list for the branch being tracked.  For example, users "
"tracking the {betarel-current-major}-STABLE branch should join the {dev-"
"commits-src-branches}.  This list records the commit log entry for each "
"change as it is made, along with any pertinent information on possible side "
"effects."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:630
msgid ""
"To join these lists, go to {mailing-lists}, click on the list to subscribe "
"to, and follow the instructions.  In order to track changes for the whole "
"source tree, subscribe to {dev-commits-src-all}."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:631
msgid ""
"To install a new FreeBSD-STABLE system, install the most recent FreeBSD-"
"STABLE release from the crossref:mirrors[mirrors,FreeBSD mirror sites] or "
"use a monthly snapshot built from FreeBSD-STABLE. Refer to link:https://www."
"FreeBSD.org/snapshots/[www.freebsd.org/snapshots] for more information about "
"snapshots."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:634
msgid ""
"To compile or upgrade an existing FreeBSD system to FreeBSD-STABLE, use "
"`git` to check out the source for the desired branch.  Branch names, such as "
"`stable/13`, are listed at link:https://www.FreeBSD.org/releng/[www.freebsd."
"org/releng]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:635
msgid ""
"Before compiling or upgrading to FreeBSD-STABLE , read [.filename]#/usr/src/"
"Makefile# carefully and follow the instructions in <<makeworld>>. Read the "
"{freebsd-stable} and [.filename]#/usr/src/UPDATING# to keep up-to-date on "
"other bootstrapping procedures that sometimes become necessary on the road "
"to the next release."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:637
#, no-wrap
msgid "The N-number"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:641
msgid ""
"When tracking down bugs it is important to know which versions of the source "
"code have been used to create the system exhibiting an issue.  FreeBSD "
"provides version information compiled into the kernel.  man:uname[1] "
"retrieves this information, for example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:645
#, no-wrap
msgid ""
"% uname -v\n"
"FreeBSD 14.0-CURRENT #112 main-n247514-031260d64c18: Tue Jun 22 20:43:19 MDT 2021     fred@machine:/usr/home/fred/obj/usr/home/fred/git/head/amd64.amd64/sys/FRED\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:648
msgid ""
"The final field gives information regarding the kernel name, the person that "
"built it, and the location that it was compiled in.  Looking at the 4th "
"field, it is made up of several parts:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:651
#, no-wrap
msgid "main-n247514-031260d64c18\n"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:656
#, no-wrap
msgid ""
"main\t\t<.>\n"
"n247514\t\t<.>\n"
"031260d64c18\t<.>\n"
"\t\t<.>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:660
msgid ""
"Git branch name.  Note: comparisons of n-numbers are only valid on branches "
"published by the project (`main`, `stable/XX` and `releng/XX`).  Local "
"branches will have n-numbers that will overlap commits of their parent "
"branch."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:661
msgid ""
"The n-number is a linear count of commits back to the start of the Git "
"repository starting with the Git hash included in the line."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:662
msgid "Git hash of the checked out tree"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:664
msgid ""
"Sometimes a suffix of `-dirty` is present when the kernel was built in a "
"tree with uncommitted changes.  It is absent in this example because the "
"FRED kernel was built from a pristine checkout."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:667
msgid ""
"The `git rev-list` command is used to find the n-number corresponding to a "
"Git hash.  For example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:671
#, no-wrap
msgid ""
"% git rev-list --first-parent --count 031260d64c18 <.>\n"
"247514 <.>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:673
msgid "git hash to translate (the hash from the above example is reused)"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:674
msgid "The n-number."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:680
msgid ""
"Usually this number is not all that important.  However, when bug fixes are "
"committed, this number makes it easy to quickly determine whether the fix is "
"present in the currently running system.  Developers will often refer to the "
"hash of the commit (or provide a URL which has that hash), but not the n-"
"number since the hash is the easily visible identifier for a change while "
"the n-number is not.  Security advisories and errata notices will also note "
"an n-number, which can be directly compared against your system.  When you "
"need to use shallow Git clones, you cannot compare n-numbers reliably as the "
"`git rev-list` command counts all the revisions in the repository which a "
"shallow clone omits."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:682
#, no-wrap
msgid "Updating FreeBSD from Source"
msgstr "從原始碼更新 FreeBSD"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:688
#, fuzzy
msgid ""
"Updating FreeBSD by compiling from source offers several advantages over "
"binary updates.  Code can be built with options to take advantage of "
"specific hardware.  Parts of the base system can be built with non-default "
"settings, or left out entirely where they are not needed or desired.  The "
"build process takes longer to update a system than just installing binary "
"updates, but allows complete customization to produce a tailored version of "
"FreeBSD."
msgstr ""
"從編譯原始碼來更新 FreeBSD 比起用 Binary 更新有幾項優點，在編譯程式碼時可以自"
"訂選項來充分運用特定硬體，部份基礎系統可以使用非預設的設定值編譯，或是在不需"
"要或不想要的時候跳過編譯。使用編譯的程序來更新系統比起安裝 Binary 來更新會耗"
"時許多，但能夠完整自訂一個量身定做版本的 FreeBSD。"

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:690
#, no-wrap
msgid "Quick Start"
msgstr "快速開始"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:694
#, fuzzy
#| msgid ""
#| "This is a quick reference for the typical steps used to update FreeBSD by "
#| "building from source. Later sections describe the process in more detail."
msgid ""
"This is a quick reference for the typical steps used to update FreeBSD by "
"building from source.  Later sections describe the process in more detail."
msgstr ""
"這是從原始碼編譯來更新 FreeBSD 的標準步驟快速的參考，稍後的章節會更詳細的說明"
"這個程序。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:699
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1006
msgid ""
"When switching from man:mergemaster[8] to man:etcupdate[8], the first run "
"might merge changes incorrectly generating spurious conflicts.  To prevent "
"this, perform the following steps *before* updating sources and building the "
"new world:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:704
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1011
#, no-wrap
msgid ""
"# etcupdate extract <.>\n"
"# etcupdate diff <.>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:707
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1014
msgid ""
"Bootstrap the database of stock [.filename]#/etc# files; for more "
"information see man:etcupdate[8]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:709
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1016
msgid ""
"Check the diff after bootstrapping. Trim any local changes that are no "
"longer needed to reduce the chance of conflicts in future updates."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:714
msgid "Update and Build"
msgstr "更新並編譯"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:728
#, no-wrap
msgid ""
"# git pull -C /usr/src  <.>\n"
"check /usr/src/UPDATING  <.>\n"
"# cd /usr/src          <.>\n"
"# make -j4 buildworld  <.>\n"
"# make -j4 kernel      <.>\n"
"# shutdown -r now      <.>\n"
"# etcupdate -p         <.>\n"
"# cd /usr/src          <.>\n"
"# make installworld    <.>\n"
"# etcupdate -B         <.>\n"
"# shutdown -r now      <.>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:731
msgid ""
"Get the latest version of the source. See <<updating-src-obtaining-src>> for "
"more information on obtaining and updating source."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:733
#, fuzzy
msgid ""
"Check [.filename]#/usr/src/UPDATING# for any manual steps required before or "
"after building from source."
msgstr ""
"檢查 <filename>/usr/src/UPDATING</filename> 看是否有任後在原始碼編譯之前或之"
"後需要手動操作的步驟。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:735
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:745
#, fuzzy
msgid "Go to the source directory."
msgstr "前往原始碼目錄。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:737
#, fuzzy
msgid "Compile the world, everything except the kernel."
msgstr "編譯世界 (World)，即除了核心 (Kernel) 外的所有東西。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:739
msgid ""
"Compile and install the kernel. This is equivalent to `make buildkernel "
"installkernel`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:741
#, fuzzy
msgid "Reboot the system to the new kernel."
msgstr "重新啟動系統以使用新的核心。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:743
msgid ""
"Update and merge configuration files in [.filename]#/etc/# required before "
"installworld."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:747
#, fuzzy
msgid "Install the world."
msgstr "安裝世界。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:749
msgid "Update and merge configuration files in [.filename]#/etc/#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:751
#, fuzzy
msgid "Restart the system to use the newly-built world and kernel."
msgstr "重新啟動系統以使用新編譯好的世界與核心。"

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:754
#, no-wrap
msgid "Preparing for a Source Update"
msgstr "準備原始碼更新"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:757
#, fuzzy
msgid ""
"Read [.filename]#/usr/src/UPDATING#. Any manual steps that must be performed "
"before or after an update are described in this file."
msgstr ""
"閱讀 <filename>/usr/src/UPDATING</filename>，從原始碼編譯之前與之後任何需要手"
"動操作步驟會在此檔案中說明。"

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:759
#, no-wrap
msgid "Updating the Source"
msgstr "更新原始碼"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:764
msgid ""
"FreeBSD source code is located in [.filename]#/usr/src/#.  The preferred "
"method of updating this source is through the Git version control system.  "
"Verify that the source code is under version control:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:771
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# git remote --v\n"
"origin  https://git.freebsd.org/src.git (fetch)\n"
"origin  https://git.freebsd.org/src.git (push)\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:774
msgid ""
"This indicates that [.filename]#/usr/src/# is under version control and can "
"be updated with man:git[1]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:779
#, no-wrap
msgid "# git pull -C /usr/src\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:783
#, fuzzy
msgid ""
"The update process can take some time if the directory has not been updated "
"recently.  After it finishes, the source code is up to date and the build "
"process described in the next section can begin."
msgstr ""
"若該目錄最近沒有更新過，可能會需要一些時間來完成更新動作。在更新完成之後，原"
"始碼便為最新版本，並可開始依下一章節的說明來編譯程序。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:787
#, fuzzy
#| msgid "Updating the Source"
msgid "Obtaining the source:"
msgstr "更新原始碼"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:790
msgid ""
"If the output says `fatal: not a git repository`, the files there are "
"missing or were installed with a different method.  A new checkout of the "
"source is required."
msgstr ""

#. type: Block title
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:793
#, no-wrap
msgid "FreeBSD Versions and Repository Branches"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:797
#, no-wrap
msgid "uname&#160;&#8209;r Output"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:798
#, no-wrap
msgid "Repository Path"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:800
#, no-wrap
msgid "Description"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:801
#, no-wrap
msgid "`_X.Y_-RELEASE`"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:802
#, no-wrap
msgid "`releng/_X.Y_`"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:804
#, no-wrap
msgid "The Release version plus only critical security and bug fix patches. This branch is recommended for most users."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:805
#, no-wrap
msgid "`_X.Y_-STABLE`"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:806
#, no-wrap
msgid "`stable/_X_`"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:812
#, no-wrap
msgid ""
"The Release version plus all additional development on that branch. _STABLE_ refers to the Applications Binary Interface (ABI) not changing, so software compiled for earlier versions still runs. For example, software compiled to run on FreeBSD 10.1 will still run on FreeBSD 10-STABLE compiled later.\n"
"\n"
"STABLE branches occasionally have bugs or incompatibilities which might affect users, although these are typically fixed quickly."
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:813
#, no-wrap
msgid "`_X_-CURRENT`"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:814
#, no-wrap
msgid "`main`"
msgstr ""

#. type: Table
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:815
#, no-wrap
msgid "The latest unreleased development version of FreeBSD. The CURRENT branch can have major bugs or incompatibilities and is recommended only for advanced users."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:818
msgid "Determine which version of FreeBSD is being used with man:uname[1]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:823
#, no-wrap
msgid ""
"# uname -r\n"
"13.2-RELEASE\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:827
msgid ""
"Based on <<updating-src-obtaining-src-repopath>>, the source used to update "
"`13.2-RELEASE` has a repository path of `releng/13.2`.  That path is used "
"when checking out the source:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:832
#, no-wrap
msgid ""
"# mv /usr/src /usr/src.bak <.>\n"
"# git clone --branch releng/13.2 https://git.FreeBSD.org/src.git /usr/src <.>\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:835
#, fuzzy
msgid ""
"Move the old directory out of the way. If there are no local modifications "
"in this directory, it can be deleted."
msgstr ""
"將舊的目錄移到其他地方，若沒有在這個目錄做過任何本地修改，可直接刪除這個目"
"錄。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:837
msgid ""
"The path from <<updating-src-obtaining-src-repopath>> is added to the "
"repository URL. The third parameter is the destination directory for the "
"source code on the local system."
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:839
#, no-wrap
msgid "Building from Source"
msgstr "從原始碼編譯"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:844
msgid ""
"The _world_, or all of the operating system except the kernel, is compiled.  "
"This is done first to provide up-to-date tools to build the kernel.  Then "
"the kernel itself is built:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:850
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make buildworld\n"
"# make buildkernel\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:853
msgid "The compiled code is written to [.filename]#/usr/obj#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:856
#, fuzzy
#| msgid ""
#| "These are the basic steps. Additional options to control the build are "
#| "described below."
msgid ""
"These are the basic steps.  Additional options to control the build are "
"described below."
msgstr "以上這些均為基本的步驟，用來控制編譯的其他選項在以下章節會說明。"

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:858
#, no-wrap
msgid "Performing a Clean Build"
msgstr "執行清除編譯"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:863
msgid ""
"Some versions of the FreeBSD build system leave previously-compiled code in "
"the temporary object directory, [.filename]#/usr/obj#.  This can speed up "
"later builds by avoiding recompiling code that has not changed.  To force a "
"clean rebuild of everything, use `cleanworld` before starting a build:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:867
#, no-wrap
msgid "# make cleanworld\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:870
#, no-wrap
msgid "Setting the Number of Jobs"
msgstr "設定工作數量"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:877
#, fuzzy
msgid ""
"Increasing the number of build jobs on multi-core processors can improve "
"build speed.  Determine the number of cores with `sysctl hw.ncpu`.  "
"Processors vary, as do the build systems used with different versions of "
"FreeBSD, so testing is the only sure method to tell how a different number "
"of jobs affects the build speed.  For a starting point, consider values "
"between half and double the number of cores.  The number of jobs is "
"specified with `-j`."
msgstr ""
"在多核處理器上增加編譯工作的數量可增加編譯速度，可使用 <command>sysctl hw."
"ncpu</command> 來查看有多少核心，不同處理器使用不同版本的 FreeBSD 編譯系統，"
"所以唯一能了解不同工作數量對編譯速度影響的方式便是測試。在一開始可考慮選擇一"
"個介於 1/2 到 2 倍核心數之間的數值，工作的數量可使用 <option>-j</option> 來指"
"定。"

#. type: Block title
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:879
#, no-wrap
msgid "Increasing the Number of Build Jobs"
msgstr "增加編譯工作數"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:883
msgid "Building the world and kernel with four jobs:"
msgstr "使用四個工作來編譯世界與核心："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:887
#, no-wrap
msgid "# make -j4 buildworld buildkernel\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:892
#, no-wrap
msgid "Building Only the Kernel"
msgstr "只編譯核心"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:897
msgid ""
"A `buildworld` must be completed if the source code has changed.  After "
"that, a `buildkernel` to build a kernel can be run at any time.  To build "
"just the kernel:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:902
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make buildkernel\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:905
#, no-wrap
msgid "Building a Custom Kernel"
msgstr "編譯自訂核心"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:910
#, fuzzy
msgid ""
"The standard FreeBSD kernel is based on a _kernel config file_ called [."
"filename]#GENERIC#.  The [.filename]#GENERIC# kernel includes the most "
"commonly-needed device drivers and options.  Sometimes it is useful or "
"necessary to build a custom kernel, adding or removing device drivers or "
"options to fit a specific need."
msgstr ""
"標準的 FreeBSD 核心是以一個名為 <filename>GENERIC</filename> 的<emphasis>核心"
"設定檔 (Kernel config file)</emphasis>為基礎，<filename>GENERIC</filename> 核"
"心中內含了所有最常用的裝置驅動程式與選項，有時這個檔案對編譯自訂核心也非常有"
"用，可根據其來加入或移除裝置驅動程式或選項來滿足特定需求。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:912
#, fuzzy
msgid ""
"For example, someone developing a small embedded computer with severely "
"limited RAM could remove unneeded device drivers or options to make the "
"kernel slightly smaller."
msgstr ""
"例如，要開發一個 <acronym>RAM</acronym> 受到嚴重限制的小型嵌入式電腦，便可移"
"除不需要的裝置驅動程式或選項來縮小核心。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:915
msgid ""
"Kernel config files are located in [.filename]#/usr/src/sys/arch/conf/#, "
"where _arch_ is the output from `uname -m`.  On most computers, that is "
"`amd64`, giving a config file directory of [.filename]#/usr/src/sys/amd64/"
"conf/#."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:921
#, fuzzy
msgid ""
"[.filename]#/usr/src# can be deleted or recreated, so it is preferable to "
"keep custom kernel config files in a separate directory, like [.filename]#/"
"root#.  Link the kernel config file into the [.filename]#conf# directory.  "
"If that directory is deleted or overwritten, the kernel config can be re-"
"linked into the new one."
msgstr ""
"<filename>/usr/src</filename> 可以被刪除或重建，所以較建議將自訂核心設定檔放"
"在另一個目錄，如 <filename>/root</filename>，並將核心設定檔以連結放至 "
"<filename>conf</filename> 目錄，若該目錄被刪除或覆寫，便可重新建立一個新的核"
"心設定的連結。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:925
#, fuzzy
msgid ""
"A custom config file can be created by copying the [.filename]#GENERIC# "
"config file.  In this example, the new custom kernel is for a storage "
"server, so is named [.filename]#STORAGESERVER#:"
msgstr ""
"自訂設定檔可由複製 <filename>GENERIC</filename> 設定檔來建立，在此範例，新的"
"自訂核心要用在儲存伺服器，所以將其命名為 <filename>STORAGESERVER</filename>："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:931
#, no-wrap
msgid ""
"# cp /usr/src/sys/amd64/conf/GENERIC /root/STORAGESERVER\n"
"# cd /usr/src/sys/amd64/conf\n"
"# ln -s /root/STORAGESERVER .\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:934
msgid ""
"[.filename]#/root/STORAGESERVER# is then edited, adding or removing devices "
"or options as shown in man:config[5]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:936
msgid ""
"The custom kernel is built by setting `KERNCONF` to the kernel config file "
"on the command line:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:940
#, no-wrap
msgid "# make buildkernel KERNCONF=STORAGESERVER\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:943
#, no-wrap
msgid "Installing the Compiled Code"
msgstr "安裝編譯好的程式"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:946
msgid ""
"After the `buildworld` and `buildkernel` steps have been completed, the new "
"kernel and world are installed:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:955
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make installkernel\n"
"# shutdown -r now\n"
"# cd /usr/src\n"
"# make installworld\n"
"# shutdown -r now\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:958
msgid ""
"If a custom kernel was built, `KERNCONF` must also be set to use the new "
"custom kernel:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:967
#, no-wrap
msgid ""
"# cd /usr/src\n"
"# make installkernel KERNCONF=STORAGESERVER\n"
"# shutdown -r now\n"
"# cd /usr/src\n"
"# make installworld\n"
"# shutdown -r now\n"
msgstr ""

#. type: Title ===
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:970
#, no-wrap
msgid "Completing the Update"
msgstr "完成更新"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:974
#, fuzzy
msgid ""
"A few final tasks complete the update.  Any modified configuration files are "
"merged with the new versions, outdated libraries are located and removed, "
"then the system is restarted."
msgstr ""
"還有最後一些的工作要做來完成更新，任何修改過的設定檔要與新版本的設定檔合併、"
"移除找到的過時程式庫，然後重新啟動系統。"

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:976
#, no-wrap
msgid "Merging Configuration Files with man:etcupdate[8]"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:981
msgid ""
"man:etcupdate[8] is a tool for managing updates to files that are not "
"updated as part of an installworld such as files located in [.filename]#/etc/"
"#.  It manages updates by doing a three-way merge of changes made to these "
"files against the local versions.  It is also designed to minimize the "
"amount of user intervention, in contrast to man:mergemaster[8]'s interactive "
"prompts."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:986
msgid ""
"In general, man:etcupdate[8] does not need any specific arguments for its "
"job.  There is however a handy in between command for sanity checking what "
"will be done the first time man:etcupdate[8] is used:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:990
#, no-wrap
msgid "# etcupdate diff\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:993
msgid "This command allows the user to audit configuration changes."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:996
msgid ""
"If man:etcupdate[8] is not able to merge a file automatically, the merge "
"conflicts can be resolved with manual interaction by issuing:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1000
#, no-wrap
msgid "# etcupdate resolve\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1019
#, no-wrap
msgid "Merging Configuration Files with man:mergemaster[8]"
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1024
msgid ""
"man:mergemaster[8] provides a way to merge changes that have been made to "
"system configuration files with new versions of those files.  man:"
"mergemaster[8] is an alternative to the preferred man:etcupdate[8] With `-"
"Ui`, man:mergemaster[8] automatically updates files that have not been user-"
"modified and installs new files that are not already present:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1028
#, no-wrap
msgid "# mergemaster -Ui\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1032
msgid ""
"If a file must be manually merged, an interactive display allows the user to "
"choose which portions of the files are kept.  See man:mergemaster[8] for "
"more information."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1034
msgid ""
"If the standard [.filename]#/usr/src# was not used, another parameter must "
"be passed to man:mergemaster[8]:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1038
#, no-wrap
msgid "# mergemaster -Ui PATH_TO_SRC\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1041
#, no-wrap
msgid "Checking for Outdated Files and Libraries"
msgstr "檢查過時的檔案與程式庫"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1045
#, fuzzy
msgid ""
"Some obsolete files or directories can remain after an update.  These files "
"can be located:"
msgstr "部份廢棄的檔案或目錄可以在更新之後保留，可使用以下指令找出這些檔案："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1049
#, no-wrap
msgid "# make check-old\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1052
msgid "and deleted:"
msgstr "並用以下指令刪除："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1056
#, no-wrap
msgid "# make delete-old\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1060
#, fuzzy
msgid "Some obsolete libraries can also remain.  These can be detected with:"
msgstr "部份廢棄的程式庫也可以保留下來，可使用以下指令來偵測這些程式庫："

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1064
#, no-wrap
msgid "# make check-old-libs\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1067
msgid "and deleted with"
msgstr "並使用以下指令刪除"

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1071
#, no-wrap
msgid "# make delete-old-libs\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1075
#, fuzzy
msgid ""
"Programs which were still using those old libraries will stop working when "
"the library has been deleted.  These programs must be rebuilt or replaced "
"after deleting the old libraries."
msgstr ""
"那些仍使用舊程式庫的程式將在刪除程式庫之後無法正常運作，而這些程式須要在刪除"
"舊程式庫之後重新編譯或更換。"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1081
msgid ""
"When all the old files or directories are known to be safe to delete, "
"pressing kbd:[y] and kbd:[Enter] to delete each file can be avoided by "
"setting `BATCH_DELETE_OLD_FILES` in the command.  For example:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1085
#, no-wrap
msgid "# make BATCH_DELETE_OLD_FILES=yes delete-old-libs\n"
msgstr ""

#. type: Title ====
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1090
#, no-wrap
msgid "Restarting After the Update"
msgstr "更新後重新啟動"

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1093
msgid ""
"The last step after updating is to restart the computer so all the changes "
"take effect:"
msgstr "更新之後的最後一個步驟便是重新啟動電腦，來讓所有的變更生效："

#. type: Title ==
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1100
#, no-wrap
msgid "Tracking for Multiple Machines"
msgstr "多部機器追蹤"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1108
msgid ""
"When multiple machines need to track the same source tree, it is a waste of "
"disk space, network bandwidth, and CPU cycles to have each system download "
"the sources and rebuild everything.  The solution is to have one machine do "
"most of the work, while the rest of the machines mount that work via NFS.  "
"This section outlines a method of doing so.  For more information about "
"using NFS, refer to crossref:network-servers[network-nfs,\"Network File "
"System (NFS)\"]."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1113
msgid ""
"First, identify a set of machines which will run the same set of binaries, "
"known as a _build set_.  Each machine can have a custom kernel, but will run "
"the same userland binaries.  From that set, choose a machine to be the "
"_build machine_ that the world and kernel are built on.  Ideally, this is a "
"fast machine that has sufficient spare CPU to run `make buildworld` and "
"`make buildkernel`."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1117
msgid ""
"Select a machine to be the _test machine_, which will test software updates "
"before they are put into production.  This _must_ be a machine that can "
"afford to be down for an extended period of time.  It can be the build "
"machine, but need not be."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1120
msgid ""
"All the machines in this build set need to mount [.filename]#/usr/obj# and [."
"filename]#/usr/src# from the build machine via NFS.  For multiple build "
"sets, [.filename]#/usr/src# should be on one build machine, and NFS mounted "
"on the rest."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1126
msgid ""
"Ensure that [.filename]#/etc/make.conf# and [.filename]#/etc/src.conf# on "
"all the machines in the build set agree with the build machine.  That means "
"that the build machine must build all the parts of the base system that any "
"machine in the build set is going to install.  Also, each build machine "
"should have its kernel name set with `KERNCONF` in [.filename]#/etc/make."
"conf#, and the build machine should list them all in its `KERNCONF`, listing "
"its own kernel first.  The build machine must have the kernel configuration "
"files for each machine in its [.filename]#/usr/src/sys/arch/conf#."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1133
msgid ""
"On the build machine, build the kernel and world as described in "
"<<makeworld>>, but do not install anything on the build machine.  Instead, "
"install the built kernel on the test machine.  On the test machine, mount [."
"filename]#/usr/src# and [.filename]#/usr/obj# via NFS.  Then, run `shutdown "
"now` to go to single-user mode in order to install the new kernel and world "
"and run `mergemaster` as usual.  When done, reboot to return to normal multi-"
"user operations."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1136
msgid ""
"After verifying that everything on the test machine is working properly, use "
"the same procedure to install the new software on each of the other machines "
"in the build set."
msgstr ""
"在測試主機上檢驗完所有東西皆運作正常之後，使用相同的程序將編譯好的結果安裝到"
"在建置集中的其他主機。"

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1144
msgid ""
"The same methodology can be used for the ports tree.  The first step is to "
"share [.filename]#/usr/ports# via NFS to all the machines in the build set.  "
"To configure [.filename]#/etc/make.conf# to share distfiles, set `DISTDIR` "
"to a common shared directory that is writable by whichever user `root` is "
"mapped to by the NFS mount.  Each machine should set `WRKDIRPREFIX` to a "
"local build directory, if ports are to be built locally.  Alternately, if "
"the build system is to build and distribute packages to the machines in the "
"build set, set `PACKAGES` on the build system to a directory similar to "
"`DISTDIR`."
msgstr ""

#. type: Title ==
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1146
#, no-wrap
msgid "Building on non-FreeBSD Hosts"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1150
msgid ""
"Historically, building FreeBSD required a FreeBSD host.  Nowadays, the "
"FreeBSD can be build on Linux distributions and macOS."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1156
msgid ""
"To build FreeBSD on non-FreeBSD hosts, the recommendation is to use the "
"`tools/build/make.py` script.  This script acts as a wrapper around `bmake`, "
"which is the make implementation used by FreeBSD.  It ensures that the "
"necessary tooling, including the actual FreeBSD's man:make[1], is "
"bootstrapped and that the build environment is properly configured.  In "
"particular, it sets the external toolchain variables, such as `XCC`, `XLD`, "
"and others.  Additionally, the script can pass any additional command "
"arguments, such as `-j 4` for parallel builds or specific make targets, to "
"`bmake`."
msgstr ""

#. type: delimited block = 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1161
msgid ""
"A recent version of `bmake` can be used instead of the `tools/build/make.py` "
"script as well.  In that case, however, required environment variables need "
"to be set manually (the easiest way to obtain a list of them is by running "
"`tools/build/make.py --debug`)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1165
msgid ""
"Otherwise, the list of prerequisites for building FreeBSD is rather short.  "
"In fact, it boils down to installing a couple of dependencies."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1168
msgid ""
"On macOS, the only dependency LLVM.  The necessary dependencies can be "
"installed with package manager (e.g., link:https://brew.sh/[Homebrew]):"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1172
#, no-wrap
msgid "brew install llvm\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1175
msgid ""
"On a Linux distributions, install link:https://clang.llvm.org/[Clang] "
"version 10.0 or newer and the headers for libarchive and libbz2 (often "
"packaged as libarchive-dev and libbz2-dev)."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1177
msgid ""
"Once the dependencies are installed, the host should be able to build "
"FreeBSD."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1179
msgid ""
"For example, the following `tools/build/make.py` invocation builds the world:"
msgstr ""

#. type: delimited block . 4
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1183
#, no-wrap
msgid "MAKEOBJDIRPREFIX=/tmp/obj tools/build/make.py -j 8 TARGET=arm64 TARGET_ARCH=aarch64 buildworld\n"
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1188
msgid ""
"It builds the world for target `aarch64:arm64` on 8 CPUs and uses [."
"filename]#/tmp/obj# for object files.  Note that the variables "
"`MAKEOBJDIRPREFIX`, `TARGET`, and `TARGET_ARCH` are mandatory when building "
"on non-FreeBSD hosts.  Also, make sure to create the object directory "
"pointed to by the `MAKEOBJDIRPREFIX` environment variable."
msgstr ""

#. type: Plain text
#: documentation/content/en/books/handbook/cutting-edge/_index.adoc:1189
msgid "Refer to man:arch[7] and man:build[7] for more details."
msgstr ""

#~ msgid ""
#~ "include::shared/attributes/attributes-{{% lang %}}.adoc[] include::shared/"
#~ "{{% lang %}}/teams.adoc[] include::shared/{{% lang %}}/mailing-lists."
#~ "adoc[] include::shared/{{% lang %}}/urls.adoc[]"
#~ msgstr ""
#~ "include::shared/attributes/attributes-{{% lang %}}.adoc[] include::shared/"
#~ "{{% lang %}}/teams.adoc[] include::shared/{{% lang %}}/mailing-lists."
#~ "adoc[] include::shared/{{% lang %}}/urls.adoc[]"
